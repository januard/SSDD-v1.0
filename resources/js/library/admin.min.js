/*
|--------------------------------------------------------------------------
| Variables
|--------------------------------------------------------------------------
*/
var $ts;

/*
|--------------------------------------------------------------------------
| Functions
|--------------------------------------------------------------------------
*/

/*
 * Title
 *
 * @param xxxxx [String, Integer, Float] // Ex. "xxxxx", "xxxxx"
 * 
 * @return xxxxx [String, Integer, Float]
 **
 */
window.testFunction = function() {
    
}

/*
 * System Log
 *
 * @param system [String] // Ex. "system_1", "system_2"
 *
 */
window.storeSystemLog = function(system_log, description) {
	
	$.ajax({
		type: 'POST',
		url: '/api/admin/audit_trail/system_log/store_system_log', 
		data: {
			system_log: system_log, 
			description: description, 
		},
		success: function(response) {}
	});
    
}

/*
 * Toggle Password Visibility
 *
 * @param input [Element] // Ex. "password"
 * @param icon [Element] // Ex. "password_icon"
 *
 */
window.togglePasswordVisibility = function(input, icon) {
    document.getElementById(input).getAttribute('type') === 'password' ? [
        document.getElementById(input).setAttribute('type', 'text'), 
        document.getElementById(icon).classList.remove('fa-eye'), 
        document.getElementById(icon).classList.add('fa-eye-slash')
    ] : [
        document.getElementById(input).setAttribute('type', 'password'), 
        document.getElementById(icon).classList.remove('fa-eye-slash'), 
        document.getElementById(icon).classList.add('fa-eye')
    ];
}

/*
|--------------------------------------------------------------------------
| Initialize
|--------------------------------------------------------------------------
*/

// CSRF Token Laravel
$.ajaxSetup({
	headers: {
		'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr("content"),
		'Authorization': 'Bearer '+ getAppDetails.api_token,
	}
});

$(document).on("click", 'a[href$="#"]', function(event) {
    event.preventDefault ? event.preventDefault() : event.returnValue = false;
});

$(function() {
	$('#logout_token').val(getAppDetails.csrf_token);
	$(document).on('click', '.edit-user-account', function() {
		$.ajax({
			type: 'GET',
			url: '/api/admin/system/users/show_user_details/'+ $(this).attr('data-id'), 
			success: function(response) {
				let modal = $(document).find('#modal_edit_user .modal-content');
				let data = response['data']['user'];
				$('#first_name').val(data['first_name']);
				$('#middle_name').val(data['middle_name']);
				$('#last_name').val(data['last_name']);
				$('#edit_role').val(data['account_type']);
				$('#edit_role_value').val($('.edit-user-role[data-id="'+ data['account_type'] +'"]').text());
				$('#edit_portal').val(data['portal']);
				$('#email').val(data['email']);
				modal.find('.modal-loader').addClass('d-none');
				modal.find('.content').removeClass('d-none');
			}, 
			error: function(response) {
				storeSystemLog('Error Log: User Update', response);
			}
		});
	});
	
	/*
	$.ajax({
		type: 'POST',
		url: '/admin/system/users/update_user', 
		data: {
			user_id: $(this).attr('data-id'), 
		},
		success: function(response) {
			
		}, 
		error: function(response) {
			
			storeSystemLog('Error Log: User Update', response);
			
		}
	});
	*/
	
});